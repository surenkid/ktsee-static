!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):e.Modal=o()}(this,function(){"use strict";function e(e,o){for(var t in o)e[t]=o[t];return e}function o(e,o){return e.className.match(new RegExp("(\\s|^)"+o+"(\\s|$)"))}function t(e,t){o(e,t)||(e.className+=" "+t)}function n(e,t){if(o(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}var c=1050,d=function(o){var t={id:"modal"+(new Date).getTime(),type:0,addClass:"",title:"提示",backdrop:!0,confirmButton:!0,cancelButton:!0,confirmText:"确定",ccancelText:"取消",complete:function(){},confirm:function(){},cancel:function(){}},o=e(t,o);this.options=o,this.confirm=o.confirm,this.cancel=o.cancel,this.complete=o.complete,this.element=document.querySelectorAll("#"+o.id),this.init(this.options,this.element)};return d.prototype.init=function(e,o){var t=this;o.length<=0&&(c++,t.show(e,o))},d.prototype.show=function(){var e=this,o=e.options;"string"==typeof o.addClass?o.addClass=o.addClass:o.addClass="";var n="",d=document.createElement("div");d.id=o.id,d.className="modal "+o.addClass,d.style.zIndex=c-1,n+='<div class="modal-header">'+o.title+'<a href="javascript:;" class="modal-close modal-close-'+o.id+'" >×</a></div>',n+='<div class="modal-body">'+o.content+"</div>",n+='<div class="modal-footer modal-footer-right"><div class="btn-group">',o.confirmButton&&(n+='<a href="javascript:;" class="modal-btn modal-confirm-'+o.id+'" >'+o.confirmText+"</a>"),o.cancelButton&&1!=o.type&&(n+='<a href="javascript:;" class="modal-btn modal-cancel-'+o.id+'">'+o.ccancelText+"</a>"),n+="</div></div>",d.innerHTML=n,document.body.appendChild(d),setTimeout(function(){t(d,"in")},0),"function"==typeof e.complete&&e.complete(),o.backdrop?e.backdrop(o):"",e.bindEvent(o)},d.prototype.hide=function(e){var o=e||this.options.id,t=document.querySelector("#"+o);document.body.removeChild(t),document.querySelectorAll(".modal-backdrop-"+o).length>0?this.hideBackDrop(o):""},d.prototype.backdrop=function(e){var o=e.id;if(document.querySelectorAll(".modal-backdrop-"+o).length<=0){var n=document.createElement("div");n.className="modal-backdrop modal-backdrop-"+o,n.style.zIndex=c-2,document.body.appendChild(n),t(document.body,"modal-open"),setTimeout(function(){t(n,"in")},0)}},d.prototype.hideBackDrop=function(e){var o=document.querySelector(".modal-backdrop-"+e);document.body.removeChild(o),document.querySelectorAll(".modal-backdrop").length<1&&n(document.body,"modal-open")},d.prototype.bindEvent=function(e){var o=this,t=e.id,n=document.querySelectorAll(".modal-confirm-"+t);n[0].onclick=function(){"function"==typeof o.confirm&&(o.confirm(),o.hide(t))};var c=document.querySelectorAll(".modal-cancel-"+t);c.length>0&&(c[0].onclick=function(){"function"==typeof o.cancel&&(o.cancel(),o.hide(t))});var d=document.querySelectorAll(".modal-close-"+t),i=document.querySelectorAll(".modal-backdrop-"+t);d.length>0&&(d[0].onclick=function(){o.hide(t)}),i.length>0&&(i[0].onclick=function(){o.hide(t)},i[0].ontouchmove=function(e){e.preventDefault()})},function(e){new d(e)}});